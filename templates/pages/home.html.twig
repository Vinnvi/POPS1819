{% extends 'topBar.html.twig' %}
{% block title %}Mes notes de frais{% endblock %}
{% block body %}
<div class="row p-2">
    <div class="card-panel col s8">
        <h5>Notifications</h5>
        <div class="divider"></div>
        <table class="responsive-table">
            <thead>
            <tr class="black white-text">
                <th>Catégorie</th>
                <th>Detail</th>
                <th>Date</th>
            </tr>
            </thead>

            <tbody>
            {% for notification in notifications %}
                <tr class="
                    {% if notification.getStatut() == "OK" %}
                        green lighten-4
                    {% elseif notification.getStatut() == "ACTION_NECESSAIRE" %}
                        red lighten-4
                    {% endif %}
                ">
                    <td>{{ notification.getCategorie() }}</td>
                    <td>{{ notification.getDescription() }}</td>
                    {% if notification.getDate()|date('d') == currentDate[0] and notification.getDate()|date('m') == currentDate[1] and notification.getDate()|date('Y') == currentDate[2] %}
                        <td>{{ notification.getDate()|date('H:i') }}</td>
                    {% else %}
                        <td>{{ notification.getDate()|date('d/m/Y') }}</td>
                    {% endif %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="col s4 h-100">
        <div class="card-panel p-1">
            
            <h5>Accès rapide</h5>
            <div class="divider"></div>
            {% for note in notes_de_frais %}
                <a href="{{path('app_noteFrais')}}">
                    <div class="card grey darken-1">
                        <div class="card-content white-text">
                        <span class="card-title">Note de frais du {% if note.getMois() < 10 %}0{% endif %}{{ note.getMois() }}/{{ note.getAnnee() }}</span>
                        <i>{{ note.getStatut() }}</i>
                        </div>
                    </div>
                </a>
            {% endfor %}
            <a class="waves-effect waves-light btn">Faire une demande de congés</a>
        </div>
        <div class="card-panel p-1">
            <h5>Mes missions</h5>
            <div class="divider"></div>
            {% for mission in missions %}
                <div class="card grey darken-1">
                    <div class="card-content white-text">
                    <span class="card-title">{{ mission.getNom() }}</span>
                    <i>{{ mission.getDateDebut()|date('d/m/Y') }} - {{ mission.getDateFin()|date('d/m/Y') }}</i>
                    </div>
                </div>
            {% endfor %}
            <a class="waves-effect waves-light btn">Accèder à toutes mes missions</a>
        </div>
    </div>
</div>

{% endblock %}

{% block researchBar %}
    <script>
        $(document).ready(function(){
            $('input.validate').autocomplete({
            data: {{ listeCollaborateurs|json_encode|raw }},
            });
        });
    </script>
{% endblock %}

